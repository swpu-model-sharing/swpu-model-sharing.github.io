<!DOCTYPE html>
<html lang="en">

<!-- Head tag (contains Google-Analytics、Baidu-Tongji)-->
<head>
  <!-- Google Analytics -->
  
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-xxxxxx-xx"></script>
    <script type="text/javascript">
      window.dataLayer = window.dataLayer || [];

      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());

      gtag('config', 'UA-xxxxxx-xx');
    </script>
  

  <!-- Baidu Tongji -->
  
    <script type="text/javascript">
      // Originial
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  

  <!-- Baidu Push -->
  
    <script>
      (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
      })();
    </script>
  

  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

  <meta name="google-site-verification" content="lxDfCplOZbIzjhG34NuQBgu2gdyRlAtMB4utP5AgEBc"/>
  <meta name="baidu-site-verification" content="PpzM9WxOJU"/>

  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="description" content="为文科科研工作者提供学术帮助"/>
  <meta name="keyword" content="文科学习·数学相助"/>
  <link rel="shortcut icon" href="/img/avatar/logo.png"/>

  <!-- Place this tag in your head or just before your close body tag. -->
  <script async="async" defer="defer" src="https://buttons.github.io/buttons.js"></script>

  
    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/beantech.min.css"/>

    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css"/>
    <link rel="stylesheet" href="/css/widget.css"/>
    <link rel="stylesheet" href="/css/rocket.css"/>
    <link rel="stylesheet" href="/css/signature.css"/>
    <link rel="stylesheet" href="/css/catalog.css"/>
    <link rel="stylesheet" href="/css/livemylife.css"/>

    
      <!-- wave start -->
      <link rel="stylesheet" href="/css/wave.css"/>
      <!-- wave end -->
    

    
      <!-- top start (article top hot config) -->
      <link rel="stylesheet" href="/css/top.css"/>
      <!-- top end -->
    

    
      <!-- ThemeColor start -->
      <link rel="stylesheet" href="/css/scroll.css"/>
      <!-- ThemeColor end -->
    

    
      <!-- viewer start (Picture preview) -->
      <link rel="stylesheet" href="/css/viewer.min.css"/>
      <!-- viewer end -->
    

    
      <!-- Search start -->
      <link rel="stylesheet" href="/css/search.css"/>
      <!-- Search end -->
    

    
      <!-- ThemeColor start -->
      <link rel="stylesheet" href="/css/themecolor.css"/>
      <!-- ThemeColor end -->
    

    

    
      <!-- gitalk start -->
      <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"> -->
      <link rel="stylesheet" href="/css/gitalk.css"/>
      <!-- gitalk end -->
    
  

  <!-- Custom Fonts -->
  <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
  <!-- Hux change font-awesome CDN to qiniu -->
  <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" type="text/css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- Hux Delete, sad but pending in China <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'> <link
  href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/ css'> -->

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]> <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script> <![endif]-->

  <!-- ga & ba script hoook -->
  <link rel="canonical" href="https://swpu-model-sharing.github.io/en/KMV/">
  <title>
    
      KMV模型 - 西柚数学云航母
    
  </title>
<meta name="generator" content="Hexo 5.4.0"></head>


<!-- hack iOS CSS :active style -->

	<body ontouchstart="" class="body--light body--dark">


		<!-- ThemeColor -->
		
		<!-- ThemeColor -->
<style type="text/css">
  .body--light {
    --light-mode: none;
    --dark-mode: block;
  }
  .body--dark {
    --light-mode: block;
    --dark-mode: none;
  }
  i.mdui-icon.material-icons.light-mode {
    display: var(--light-mode);
  }
  i.mdui-icon.material-icons.dark-mode {
    display: var(--dark-mode);
  }
</style>
<div class="toggle" onclick="document.body.classList.toggle('body--dark')">
  <i class="mdui-icon material-icons light-mode"></i>
  <i class="mdui-icon material-icons dark-mode"></i>
</div>
<script>
  //getCookieValue
  function getCookieValue(a) {
    var b = document.cookie.match('(^|[^;]+)\\s*' + a + '\\s*=\\s*([^;]+)');
    return b
      ? b.pop()
      : '';
  }
  let themeMode = 'dark';
  if (getCookieValue('sb-color-mode') && (getCookieValue('sb-color-mode') !== themeMode)) {
    let dbody = document.body.classList;
    themeMode === 'dark' ? dbody.remove('body--dark') : dbody.add('body--dark');
  }

  //setCookieValue
  var toggleBtn = document.querySelector(".toggle");
  toggleBtn.addEventListener("click", function () {
    var e = document.body.classList.contains("body--dark");
    var cookieString = e
      ? "dark"
      : "light";
    var exp = new Date();
    exp.setTime(exp.getTime() + 3 * 24 * 60 * 60 * 1000); //3天过期
    document.cookie = "sb-color-mode=" + cookieString + ";expires=" + exp.toGMTString() + ";path=/";
  });
</script>

		

		<!-- Gitter -->
		
		<!-- Gitter -->
<!-- Docs:https://gitter.im/?utm_source=left-menu-logo -->
<script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'your-community/your-room'
  };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>

		

		<!-- Navigation (contains search)-->
		<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header page-scroll">
      <button type="button" class="navbar-toggle">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">数学云航母</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <!-- Known Issue, found by Hux: <nav>'s height woule be hold on by its content. so, when navbar scale out, the <nav> will cover tags. also mask any touch event of tags, unfortunately. -->
    <div id="huxblog_navbar">
      <div class="navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="/">HOME</a>
          </li>

          
          
          
          
          <li>
            <a href="/about/">
              
              ABOUT
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/categories/">
              
              CATEGORIES
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/tags/">
              
              TAGS
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/archive/">
              
              ARCHIVES
              
              
            </a>
          </li>
          
          

          
          <li>
            <a class="popup-trigger">
              <span class="search-icon"></span>SEARCH</a>
          </li>
          

          <!-- LangSelect -->
          
          
          
          
          
        </ul>
      </div>
    </div>
    <!-- /.navbar-collapse -->
  </div>
  <!-- /.container -->
</nav>
<!-- progress -->
<div id="progress">
  <div class="line" style="width: 0%;"></div>
</div>

<script>
  // Drop Bootstarp low-performance Navbar Use customize navbar with high-quality material design animation in high-perf jank-free CSS3 implementation
  var $body = document.body;
  var $toggle = document.querySelector('.navbar-toggle');
  var $navbar = document.querySelector('#huxblog_navbar');
  var $collapse = document.querySelector('.navbar-collapse');

  $toggle.addEventListener('click', handleMagic)

  function handleMagic(e) {
    if ($navbar.className.indexOf('in') > 0) {
      // CLOSE
      $navbar.className = " ";
      // wait until animation end.
      setTimeout(function() {
        // prevent frequently toggle
        if ($navbar.className.indexOf('in') < 0) {
          $collapse.style.height = "0px"
        }
      }, 400)
    } else {
      // OPEN
      $collapse.style.height = "auto"
      $navbar.className += " in";
    }
  }
</script>


		<!-- Post Header (contains intro-header、signature、wordcount、busuanzi、waveoverlay) -->
		<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->

  <style type="text/css">
    .body--light {
      /* intro-header */
      --intro-header-background-image-url-home: url('/img/header_img/newhome_bg.jpg');
      --intro-header-background-image-url-post: url('/img/header_img/lml_bg.jpg');
      --intro-header-background-image-url-page: url('//img/header_img/lml_bg.jpg');
    }
    .body--dark {
      --intro-header-background-image-url-home: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('/img/header_img/newhome_bg.jpg');
      --intro-header-background-image-url-post: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('/img/header_img/lml_bg.jpg');
      --intro-header-background-image-url-page: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('//img/header_img/lml_bg.jpg');
    }

    header.intro-header {
       /*post*/
        background-image: var(--intro-header-background-image-url-post);
        /* background-image: url('/img/header_img/lml_bg.jpg'); */
      
    }

    
      #signature {/*signature*/
        background-image: url('/undefined');
      }
    
  </style>





<header class="intro-header">
  <!-- Signature -->
  <div id="signature">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
          
          <div class="post-heading">
            <div class="tags">
              
              <a class="tag" href="/tags/#Hexo-Theme-LiveMyLife" title="Hexo-Theme-LiveMyLife">Hexo-Theme-LiveMyLife</a>
              
            </div>
            <h1>KMV模型</h1>
            <h2 class="subheading">（管理类）</h2>
            <span class="meta">
              Posted by Chunlin Guo on
              2022-06-03
            </span>


            
            <!-- WordCount start -->
            <div class="blank_box"></div>
            <span class="meta">
              Estimated Reading Time <span class="post-count">24</span> Minutes
            </span>
            <div class="blank_box"></div>
            <span class="meta">
              Words <span class="post-count">6.8k</span> In Total
            </span>
            <div class="blank_box"></div>
            <!-- WordCount end -->
            
            
            <!-- 不蒜子统计 start -->
            <span class="meta" id="busuanzi_container_page_pv">
              Viewed <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> Times
            </span>
            <!-- 不蒜子统计 end -->
            


          </div>
          
        </div>
      </div>
    </div>
  </div>

  
  <!-- waveoverlay start -->
  <div class="preview-overlay">
    <svg class="preview-waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
      <defs>
        <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path>
      </defs>
      <g class="preview-parallax">
        <use xlink:href="#gentle-wave" x="48" y="0" fill=var(--gentle-wave1)></use>
        <use xlink:href="#gentle-wave" x="48" y="3" fill=var(--gentle-wave2)></use>
        <use xlink:href="#gentle-wave" x="48" y="5" fill=var(--gentle-wave3)></use>
        <use xlink:href="#gentle-wave" x="48" y="7" fill=var(--gentle-wave)></use>
      </g>
    </svg>
  </div>
  <!-- waveoverlay end -->
  

</header>



		<!-- Main Content (Post contains
	Pager、
	tip、
	socialshare、
	gitalk、gitment、disqus-comment、
	Catalog、
	Sidebar、
	Featured-Tags、
	Friends Blog、
	anchorjs、
	) -->
		<!-- Modify by Yu-Hsuan Yen -->
<!-- Post Content -->
<article>
  <div class="container">
    <div class="row">
      <!-- Post Container -->
      <div class="col-lg-8 col-lg-offset-1 col-md-10 col-md-offset-1 post-container">

        <blockquote>
<p>KMV模型是美国旧金山市KMV公司于1997年建立的用来估计借款企业违约概率的方法。该模型认为，贷款的信用风险是在给定负债的情况下由债务人的资产市场价值决定的。</p>
<p>但资产并没有真实地在市场交易，资产的市场价值不能直接观测到。为此，模型将银行的贷款问题倒转一个角度，从借款企业所有者的角度考虑贷款归还的问题。</p>
</blockquote>
<h2 id="KMV模型">KMV模型</h2>
<h2 id="目录">目录</h2>
<p>1 KMV模型概述<br>
2 KMV模型的运用步骤<br>
3 KMV模型的理论基础<br>
4 KMV模型的研究阶段<br>
5 KMV模型的评价<br>
6 KMV模型与Creditmetrics模型的比较<br>
7 KMV模型案例分析<br>
7.1 案例一:KMV模型在上市公司信用风险评价中的分析[1]<br>
8 参考文献</p>
<h2 id="KMV模型概述">KMV模型概述</h2>
<pre><code>KMV模型是美国旧金山市KMV公司于1997年建立的用来估计借款企业违约概率的方法。该模型认为，贷款的信用风险是在给定负债的情况下由债务人的资产市场价值决定的。但资产并没有真实地在市场交易，资产的市场价值不能直接观测到。为此，模型将银行的贷款问题倒转一个角度，从借款企业所有者的角度考虑贷款归还的问题。在债务到期日，如果公司资产的市场价值高于公司债务值（违约点），则公司股权价值为公司资产市场价值与债务值之间的差额；如果此时公司资产价值低于公司债务值，则公司变卖所有资产用以偿还债务，股权价值变为零。
</code></pre>
<h2 id="KMV模型的运用步骤">KMV模型的运用步骤</h2>
<pre><code>首先，它利用Black-Scholes期权定价公式，根据企业资产的市场价值、资产价值的波动性、到期时间、无风险借贷利率及负债的账面价值估计出企业股权的市场价值及其波动性。
</code></pre>
<p>其次根据公司的负债计算出公司的违约实施点 (default exercise point，为企业1年以下短期债务的价值加上未清偿长期债务账面价值的一半)，计算借款人的违约距离。<br>
最后，根据企业的违约距离与预期违约率(EDF) 之间的对应关系，求出企业的预期违约率。</p>
<h2 id="KMV模型的理论基础">KMV模型的理论基础</h2>
<pre><code>KMV模型的优势在于以现代期权理论基础作依托，充分利用资本市场的信息而非历史账面资料进行预测，将市场信息纳入了违约概率，更能反映上市企业当前的信用状况，是对传统方法的一次革命。KMV模型是一种动态模型，采用的主要是股票市场的数据，因此，数据和结果更新很快，具有前瞻性，是一种“向前看”的方法。在给定公司的现时资产结构的情况下，一旦确定出资产价值的随机过程，便可得到任一时间单位的实际违约概率。其劣势在于假设比较苛刻，尤其是资产收益分布实际上存在“肥尾”现象，并不满足正态分布假设；仅抓住了违约预测，忽视了企业信用品质的变化；没有考虑信息不对称情况下的道德风险；必须使用估计技术来获得资产价值、企业资产收益率的期望值和波动性；对非上市公司因使用资料的可获得性差，预测的准确性也较差；不能处理非线性产品，如期权、外币掉期等。
</code></pre>
<h2 id="KMV模型的研究阶段">KMV模型的研究阶段</h2>
<pre><code>KMV模型自1993年推出以来,国外学术界对KMV模型的研究经历了两个阶段:
</code></pre>
<p>第一阶段是将KMV模型的预测结果与实际的违约数据相比较,大多数研究结果表明,KMV模型能够反映信用风险的高低,并对信用风险具有很高的敏感性｡<br>
第二阶段,国外学术界对模型的验证寻找到新的角度,并开发出多种验证模型有效性的方法和技术｡<br>
我国学者主要对模型在我国适应性和参数调整方面进行了许多探讨,取得了一定的成果｡张林､张佳林(2000)､王琼､陈金贤(2002) 先后对KMV模型与其他模型进行理论上比较,认为更适合于评价上市公司的信用风险｡薛锋,鲁炜,赵恒街,刘冀云(2003)利用中国股市的数据,得出了应中市场的σv和σE的关系函数,并以一只股票为样本进行了实证分析｡乔卓等(2003)介绍了KMV模型的基本内容,以及国外的应用经验,但是并没有进行实证研究｡易丹辉,吴建民(2004年)对深市和沪市随机抽取30家公司分行业计算违约距离和违约率并作比较,认为借助违约距离衡量上市公司的信用风险是可行的｡<br>
由于缺少大量违约公司样本的历史数据库,因此,我国目前无法通过比较违约距离和破产频率的历史,拟合出代表公司违约距离的预期违约率函数｡本文尝试使用上市公司在某国有商业银行贷款不良率替代其违约率,并根据我国资本市场的特点,选取KMV模型的相关参数,同时采用某国有商业银行 2001年12月31日的235家贷款客户的不良率来替代上市公司的违约率进行实证分析,建立违约距离与不良率的函数关系｡</p>
<h2 id="KMV模型的评价">KMV模型的评价</h2>
<pre><code>KMV是运用现代期权定价理论建立起来的违约预测模型，是对传统信用风险度量方法的一次重要革命。首先，KMV可以充分利用资本市场上的信息，对所有公开上市企业进行信用风险的量化和分析；其次，由于该模型所获取的数据来自股票市场的资料，而非企业的历史数据，因而更能反映企业当前的信用状况，具有前瞻性，其预测能力更强、更及时，也更准确；另外，KMV模型建立在当代公司理财理论和期权理论的基础之上，具有很强的理论基础做依托。
</code></pre>
<p>但是，KMV模型与其他已有的模型一样，仍然存在许多缺陷。首先，模型的使用范围有一定的局限性。通常，该模型特别适用于上市公司的信用风险评估，而对非上市公司进行应用时，往往要借助一些会计信息或其他能够反映借款企业特征值的指标来替代模型中一些重要变量，同时还要通过对比分析最终得出该企业的期望违约概率，在一定程度上就有可能降低计算的准确性。其次，该模型假设公司的资产价值服从正态分布，而实际中企业的资产价值一般会呈现非正态的统计特征。再次，模型不能够对债务的不同类型进行区分，如偿还优先顺序、担保、契约等类型，使得模型的输出变量的计算结果不准确。北达公司根据中国过渡经济的资本市场的特点，开发具有中国特色的上市公司信用KMV模型目前在进行压力测试阶段.</p>
<h2 id="KMV模型与Creditmetrics模型的比较">KMV模型与Creditmetrics模型的比较</h2>
<pre><code>KMV模型与creditmetrics模型是目前国际金融界最流行的两个信用风险管理模型。两者都为银行和其它金融机构在进行贷款等授信业务时衡量授信对象的信用状况，分析所面临的信用风险，防止集中授信，进而为实现投资分散化和具体的授信决策提供量化的、更加科学的依据，为以主观性和艺术性为特征的传统信用分析方法提供了很好的补偿。然而，从上述的介绍和分析中，我们又可以明显地看到这两个模型在建模的基本思路上又相当大的差异，这些差异还主要表现在以下几个方面。
</code></pre>
<p>1、KMV模型对企业信用风险的衡量指标edf主要来自于对该企业股票市场价格变化的有关数据的分析，而creditmetrics模型对企业信用风险的衡量来自于对该企业信用评级变化及其概率的历史数据的分析。这是两者最根本的区别之一。<br>
2、由于KMV模型采用的是企业股票市场价格分析方法，这使得该模型可以随时根据该企业股票市场价格的变化来更新模型的输入数据，得出及时反映市场预期和企业信用状况变化的新的edf值。因此，kmv模型被认为是一种动态模型，可以及时反映信用风险水平的变化。然而，creditmetrics采用的是企业信用评级指标分析法。企业信用评级，无论是内部评级还是外部评级，都不可能象股票市场价格一样是动态变化的，而是在相当长的一段时间内保持静态特征。这有可能使得该模型的分析结果不能及时反映企业信用状况的变化。<br>
3 、同时，也正是因为kmv模型所提供的edf指标来自于对股票市场价格实时行情的分析，而股票市场的实时行情不仅反映了该企业历史的和当前的发展状况，更重要的是反映了市场中的投资者对于该企业未来发展的综合预期，所以，该模型被认为是一种向前看（forward-looking）的方法，edf指标中包含了市场投资者对该企业信用状况未来发展趋势的判断。这与creditmetrics模型采用的主要依赖信用状况变化的历史数据的向后看（backward-looking）的方法有根本性的差别。kmv的这种向前看的分析方法在一定程度上克服了依赖历史数据向后看的数理统计模型的“历来可以在未来复制其自身”的缺陷。<br>
4 、KMV模型所提供的edf指标在本质上是一种对风险的基数衡量法，而creditmetrics所采用的与信用评级分析法则是一种序数衡量法，两者完全不同。以基数法来衡量风险最大的特点在于不仅可以反映不同企业风险水平的高低顺序，而且可以反映风险水平差异的程度，因而更加准确。这也更加有利于对贷款的定价。而序数衡量法只能反映企业间信用风险的高低顺序，如bbb级高于bb级，却不能明确说明高到什么程度。<br>
5、creditmetrics采用的是组合投资的分析方法，注重直接分析企业间信用状况变化的相关关系，因而更加与现代组合投资管理理论相吻合。而kmv则是从单个授信企业在股票市场上的价格变化信息入手，着重分析该企业体现在股价变化信息中的自身信用状况，对企业信用变化的相关性没有给予足够的分析。</p>
<p>KMV模型案例分析</p>
<h2 id="案例一-KMV模型在上市公司信用风险评价中的分析-1">案例一:KMV模型在上市公司信用风险评价中的分析[1]</h2>
<h2 id="一、KMV模型">一、KMV模型</h2>
<p>KMV模型的基本思路是:当企业资产市场价值V低于企业所需清偿的负债面值D时,企业将发生违约；以违约距离DD表示企业资产市场价值期望值V距离违约点DP,的远近，距离越大，企业发生违约的可能性越小，反之较大；基于企业违约数据库得出某一违约距离企业实际的期望违约频率EDF；即未来违约概率。计算某一企业的期望违约频率主要有三步：估计企业资产市场价值V和波动率\sigma_V；计算违约距离DD；计算期望违约频率EDF。由于不能直接观测到V和\sigma_V，因此需要从它们与股权市场价值E、股权市场价值波动率\sigma_E以及企业负债面值D之间的关系中推导得出。<br>
KMV模型将企业负债看作是买入一份欧式看涨期权，即企业所有者持有一份以公司债务面值为执行价格,以公司资产市场价值为标的的欧式看涨期权/如果负债到期时企业资产市场价值高于其债务,企业偿还债务；当企业资产市场价值小于其债务时,企业选择违约/由于企业股权市场价值可以用Black-Scholes-Merton期权定价模型来定价，因此，KMV模型中的两个未知变量V和σV可从以下联立方程组中求解:<br>
(1)<br>
其中<br>
式中:E为企业股权市场价值,V为企业资产市场价值,D为企业债务面值,r为无风险收益率,τ为债务偿还期限,N(d)为标准累积正态分布函数,σV为企业资产价值波动率,σE为企业股权市场价值波动率。假设企业资产未来市场价值围绕企业资产市场价值的均值呈正态分布，那么，我们可以用式(2)计算负债企业的违约距离DD(Distance to Default):<br>
(2)<br>
式中：DP(Default Point)为违约点值，处于公司的流动负债与总负债之间的某一点/违约距离DD以资产市场价值标准差的倍数表示，评估企业在τ时间后信用风险的大小。根据违约距离DD的定义，公司资产市场价值低于违约点的概率，即理论上发生违约的概率为1-N(DD)。而基于违约数据库,依据违约距离可以映射出公司实际的期望违约频率EDF。由于我国当前还没有公开的违约数据库可以使用，以违约距离DD作为上市公司信用评价的依据。</p>
<h2 id="二、研究方法及参数设计">二、研究方法及参数设计</h2>
<p>针对中国上市公司股权结构和所处市场环境的特殊性，考虑中国上市公司股权割裂导致的流通股和非流通股之间的价格差异，以及在中国上市公司所处特殊市场环境下，违约点设定对模型预测能力的影响。首先调整模型中股权市场价值计算方法；根据已经确定的各项参数，由式(1)求解出未知的两项V和σV再由式(2)计算出三种违约点值情况下样本公司的违约距离DD；然后对配对样本的违约距离作t检验和Wilcoxon秩检验,检验KMV模型对上市公司整体信用风险的识别能力；最后使用ROC曲线图评价模型对上市公司个体信用风险的识别能力。<br>
1.上市公司股权市场价值波动率的估计<br>
采用历史波动率法估计上市公司股权市场价值未来一年的波动率。假设上市公司股票价格满足对数正态分布，则股票周收益率ui为。<br>
(3)<br>
式中：Si,Si − 1为股票复权后的周收盘价。计算出公司股权市场价值的年波动率σE。<br>
(4)<br>
式中：E为一年内的交易周数，通过式(3)、式(4)可以估算每一公司股权市场价值的年波动率。<br>
2.上市公司股权市场价值计算方法<br>
中国证券市场发展历史较为特殊，上市公司股票被人为分割为上市流通股票和暂不上市流通股票两种。在计算上市公司股权市场价值时需要考虑以什么样的价格来计算非流通股市场价值/由于非流通股没有市场交易价格，因此如何给非流通股定价是一件困难的事情。参考上市公司股票全流通研究中非流通股定价，以每股净资产计算非流通股的价格。<br>
流通股市场价值=12月份周平均收盘价格×流通股股数<br>
非流通股市场价值=每股净资产×非流通股股数<br>
上市公司股权市场价值=流通股市场价值+非流通股市场价值<br>
3.债务面值、债务期限和无风险利率<br>
公司债务面值D为公司财务年报中总负债面值。考虑到数据和工作量的限制，我们设定违约距离的计算时间为一年，即τ = 1。无风险利率使用中国人民银行公布的一年期定期整存整取的存款利率，见下表。<br>
表 一年期定期存款利率表<br>
年份 1999年 2000年 2001年 2002年<br>
年利率 r=2.25% r=2.25% r=2.25% r=1.98%<br>
4.违约点的确定<br>
当公司资产市场价值接近债务面值总额时，公司违约风险增加；当公司资产市场价值低于债务面值总额时，公司发生违约。但是,负债总额中的长期负债往往能缓解公司偿还债务的压力KMV公司研究表明.违约点值处于债务面值总额与流动负债之间的某一点，并且模型预测准确性对违约点值的变动比较敏感0因此.如何在中国股票市场中确定违约点值从而最大程度地提高模型的预测能力是必须重点研究的问题0为了考察不同违约点值对违约距离度量信用风险能力的影响，分别讨论三种情况：。<br>
(1)违约点值DP=流动负债<br>
(2)违约点值DP=流动负债+50%长期负债<br>
(3)违约点值DP=流动负债+75%长期负债</p>
<h2 id="三、实证研究">三、实证研究</h2>
<p>1.样本数据<br>
众所周知，上市公司连续两年亏损即被ST处理，ST公司比一般上市公司存在较高的信用风险.本文研究样本选取2003年被ST的30家上市公司及与之配对的30家非ST公司，共60家上市公司1999-2002年期间的市场和财务数据0为保证研究样本的连续性及上市公司股权市场价值计算准确，样本选取的60家公司均是1999年1月1日前上市并且在2003年1月1日前仅发行 A股的上市公司。在ST公司和非ST公司中.沪深两市各有15家。考虑到样本公司之间的可比性及最大限度避免交易场所、行业及规模对实证结论的干扰，选择配对非ST公司主要依据以下3个条件:<br>
(1)与配对ST公司同在一个证券交易所；<br>
(2)与配对ST公司同属一个行业；<br>
(3)与配对ST公司具有相近的总资产规模。<br>
样本公司的财务数据和市场数据来自深圳市国泰安(GTA)信息技术有限公司中国上市公司财务数据库和天软金融分析数据库。</p>
<h2 id="四、实证结果分析">四、实证结果分析</h2>
<pre><code>KMV模型能够识别上市公司整体的信用风险变化趋势从1999年-2002年ST公司与配对非ST公司违约距离的配对样本t检验结果(表2)中.发现上市公司被ST前1年和前2年.在三种不同违约点值情况下,ST公司和非ST公司的违约距离的差异在\alpha=0.05%显著水平下都是统计显著的。在被ST前3年及前4年，违约距离差异在ST显著水平下是统计不显著的。尽管如此.我们还是可以看出，在公司被ST的前4年内，两类公司的违约距离均值的差距有逐渐增大的趋势；特别是在上市公司被ST的前2年，模型输出的违约距离即显著性地反映出ST公司信用状况变坏的趋势/在被ST前1年时，两类公司违约距离均值的差距达到最大-0.7642，ST公司的违约距离均值远小于非ST公司Wilcoxon检验表明(同见表2),在上市公司被ST的前1年和前2年，ST公司和非ST公司的违约距离的中值在α = 0.05%显著水平下也存在显著性差异。
</code></pre>
<p>同样可以看出,从公司被ST前4年开始,ST公司与非ST公司违约距离中值差异的显著性在逐渐增大,越是接近被ST的时候,违约距离中值的差异越是显著。ST公司和非ST公司违约距离均值以及中值的显著性差异说明,KMV模型在上市公司被ST前4年,即具有较强的识别公司信用状况变化趋势的能力。ST公司和非ST公司之间违约距离差距的逐渐扩大.且差异逐渐显著,充分反映出了ST公司信用状况逐渐恶化的过程0也就是说,与非ST公司相比,ST公司的信用风险在逐年增大。因此,在中国股票市场中,运用参数调整过的123模型能够提前4年识别出上市公司整体的信用风险变化趋势，ST公司与非ST公司作为两类不同的公司,整体上的信用风险存在显著性的差异。<br>
违约距离检验结果表<br>
违约点值DP 前4年 前3年 前2年 前1年<br>
DP=流动负债 均值 ST公司 2.2942 3.0785 2.1722 2.2933<br>
非ST公司 2.3787 3.2987 2.4798 3.0445<br>
t-检验 均值差 -0.0845 -0.2202 -0.3076 -0.7512<br>
t-值 -0.6299 -1.1968 -1.9480 -3.0077<br>
P值(双尾) 0.5316 0.2364 0.0565 0.0039<br>
Wilcoxon检验 z-值 -0.5656 -0.5862 -1.8409 -3.4041<br>
P值(双尾) 0.5716 0.5577 0.0656 0.007<br>
DP=流动负债+50%长期负债 t-检验 均值差 -0.0547 -0.1772 -0.3264 -0.7583<br>
t-值 -0.4294 -0.9808 -2.0889 -3.3978<br>
P值(双尾) 0.6695 0.3308 0.0413 0.0014<br>
Wilcoxon检验 z-值 -0.3805 -0.3805 -2.0260 -3.3218<br>
P值(双尾) 0.7036 0.7036 0.0428 0.0009<br>
DP=流动负债+75%长期负债 均值 ST公司 2.2423 3.0290 2.1043 2.1429<br>
非ST公司 2.2820 3.1847 2.4395 2.9071<br>
t-检验 均值差 -0.0397 -0.1557 -0.3352 -0.7643<br>
t-值 -0.3176 -0.8641 -2.1511 -3.5263<br>
P值(双尾) 0.7521 0.3911 0.0358 0.0010<br>
Wilcoxon检验 z-值 -0.4217 -0.2365 -2.0465 -3.3835<br>
P值(双尾) 0.6733 0.8130 0.0407 0.0007</p>
<p>2.模型具有较强的个体信用风险识别能力<br>
ROC曲线(Receiver Operating Characteristic Curves)反映了信用风险模型在某一临界点时识别评价对象信用风险的能力。X轴依据违约距离大小把非ST公司从小到大排列,Y轴是违约距离少于或等于某一给定 Y值时的ST公司累积百分比ROC曲线体现了模型在排除一定比例非ST公司时能够排除多少比例ST公司的能力W该曲线离对角线越远，模型的分辨能力越强X反之则越弱，从图1-4可以看出，在被ST前1年-前4年,当模型的违约点值设定为违约点值DP=流动负债时,模型对上市公司具有最强的分辨能力；违约点值DP=流动负债+50%长期负债,以及违约点值DP=流动负债+75%长期负债时，模型具有相近的分辨能力。这一点与KMV公司推荐的违约点等于流动负债加50%长期负债时X模型的判别分辨能力最强的结论略有不同W说明在中国上市公司中,ST公司比非ST公司具有较大的短期债务偿还压力W我国的上市公司在经营绩效下降即将陷入财务困境的时候,较多地采取了增加短期债务融资的方式来维持公司的经营活动。<br>
因此，在未来一年内其违约风险比非ST公司要大得多。从下图5看出，模型在上市公司被ST前1年具有最强的分辨能力；在被ST前2年,次之；被ST前3年,再次之；被ST前4年，最差W在公司被ST的前2年起X模型即具有较强的识别公司信用风险大小的能力]而且，越是接近公司被ST时,模型的识别能力越强。<br>
实证表明KMV模型不仅能够在上市公司被ST的前4年识别出上市公司整体上的信用状况变化趋势。而且在上市公司被ST的前2年对上市公司个体具有较强的信用风险判别能力；此外,违约点等于流动负债情况时，KMV模型对上市公司信用风险具有最强的识别能力；其他两种违约点情况下模型的识别能力非常接近。根据上述结论，在中国证券市场完全可以利用KMV模型来及时识别上市公司的信用风险,为投资者、债权人、监管机构等相关人员和部门提供较为可靠的信用风险评价信息，为及时发现从而规避或者消除信用风险提供有益的策略参考。另外，由于股票价格信息除了反映公司历史状况，更为重要的是包含了市场对公司未来发展前景的预期。因此，投资者还可以参考模型的信用风险评价结果选择低风险高收益的投资组合，最大限度地化解信用风险+保障资金的安全，实现收益最大化。</p>
<h2 id="参考文献">参考文献</h2>
<p>↑ 张玲,杨贞柿,陈收.KMV模型在上市公司信用风险评价中的应用研究[J].系统工程,2004,22(11)</p>
<h2 id="以上">以上</h2>


        <hr>
        <!-- Pager -->
        <ul class="pager">
          
          <li class="previous">
            <a href="/en/ARCH/" data-toggle="tooltip" data-placement="top" title="ARCH模型">&larr; Previous Post</a>
          </li>
          
          
        </ul>

        
        <!-- tip start -->
        <!-- tip -->
<!-- tip start -->
<div class="tip">
  <p>
    
      If you like this blog or find it useful for you, you are welcome to comment on it. You are also welcome to share this blog, so that more people can participate in it. If the images used in the blog infringe your copyright, please contact the author to delete them. Thank you !
    
  </p>
</div>
<!-- tip end -->

        <!-- tip end -->
        

        
        <!-- Sharing Srtart -->
        <!-- Social Social Share Post -->
<!-- Docs:https://github.com/overtrue/share.js -->

<div class="social-share" data-initialized="true" data-disabled="tencent ,douban ,qzone ,linkedin ,facebook ,google ,diandian" data-wechat-qrcode-helper="" align="center">
  <ul class="list-inline text-center social-share-ul">
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-twitter">
        <i class="fa fa-twitter fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a class="social-share-icon icon-wechat">
        <i class="fa fa-weixin fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-weibo">
        <i class="fa fa-weibo fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-qq">
        <i class="fa fa-qq fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon" href="mailto:?subject=KMV模型&body=Hi,I found this website and thought you might like it https://swpu-model-sharing.github.io/en/KMV/">
        <i class="fa fa-envelope fa-1x" aria-hidden="true"></i>
      </a>
    </li>
  </ul>
</div>

<!-- css & js -->
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css"> -->
<script defer="defer" async="true" src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>

        <!-- Sharing End -->
        
        <hr>

        <!-- comments start -->
        <!-- 1. gitalk comment -->

  <!-- gitalk start -->
  <!-- Docs:https://github.com/gitalk/gitalk/blob/master/readme-cn.md -->

  <div id="gitalk-container"></div>

  
    <!-- <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.js"></script> -->
    <script src="/js/comment/gitalk.js"></script>
  

  <script>
    var gitalk = new Gitalk({
      clientID: '',
      clientSecret: '',
      repo: '',
      owner: '',
      admin: '',
      id: 'Fri Jun 03 2022 19:32:37 GMT+0800', // Ensure uniqueness and length less than 50
      distractionFreeMode: false, // Facebook-like distraction free mode
      perPage: 10,
      pagerDirection: 'last',
      createIssueManually: false,
      language: 'en',
      proxy: 'https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token'
    });
    gitalk.render('gitalk-container');

    var gtFolded = () => {
      setTimeout(function () {
        let markdownBody = document.getElementsByClassName("markdown-body");
        let list = Array.from(markdownBody);
        list.forEach(item => {
          if (item.clientHeight > 250) {
            item.classList.add('gt-comment-body-folded');
            item.style.maxHeight = '250px';
            item.title = 'Click to Expand';
            item.onclick = function () {
              item.classList.remove('gt-comment-body-folded');
              item.style.maxHeight = '';
              item.title = '';
              item.onclick = null;
            };
          }
        })
      }, 800);
    }
  </script>

  <!-- gitalk end -->


<!-- 2. gitment comment -->


<!-- 3. disqus comment -->


        <!-- comments end -->
        <hr>

      </div>

      <!-- Catalog: Tabe of Content -->
      <!-- Table of Contents -->

    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#KMV%E6%A8%A1%E5%9E%8B"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">KMV模型</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E7%9B%AE%E5%BD%95"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">目录</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#KMV%E6%A8%A1%E5%9E%8B%E6%A6%82%E8%BF%B0"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">KMV模型概述</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#KMV%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%BF%90%E7%94%A8%E6%AD%A5%E9%AA%A4"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">KMV模型的运用步骤</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#KMV%E6%A8%A1%E5%9E%8B%E7%9A%84%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80"><span class="toc-nav-number">5.</span> <span class="toc-nav-text">KMV模型的理论基础</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#KMV%E6%A8%A1%E5%9E%8B%E7%9A%84%E7%A0%94%E7%A9%B6%E9%98%B6%E6%AE%B5"><span class="toc-nav-number">6.</span> <span class="toc-nav-text">KMV模型的研究阶段</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#KMV%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%AF%84%E4%BB%B7"><span class="toc-nav-number">7.</span> <span class="toc-nav-text">KMV模型的评价</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#KMV%E6%A8%A1%E5%9E%8B%E4%B8%8ECreditmetrics%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%AF%94%E8%BE%83"><span class="toc-nav-number">8.</span> <span class="toc-nav-text">KMV模型与Creditmetrics模型的比较</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E6%A1%88%E4%BE%8B%E4%B8%80-KMV%E6%A8%A1%E5%9E%8B%E5%9C%A8%E4%B8%8A%E5%B8%82%E5%85%AC%E5%8F%B8%E4%BF%A1%E7%94%A8%E9%A3%8E%E9%99%A9%E8%AF%84%E4%BB%B7%E4%B8%AD%E7%9A%84%E5%88%86%E6%9E%90-1"><span class="toc-nav-number">9.</span> <span class="toc-nav-text">案例一:KMV模型在上市公司信用风险评价中的分析[1]</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E4%B8%80%E3%80%81KMV%E6%A8%A1%E5%9E%8B"><span class="toc-nav-number">10.</span> <span class="toc-nav-text">一、KMV模型</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E4%BA%8C%E3%80%81%E7%A0%94%E7%A9%B6%E6%96%B9%E6%B3%95%E5%8F%8A%E5%8F%82%E6%95%B0%E8%AE%BE%E8%AE%A1"><span class="toc-nav-number">11.</span> <span class="toc-nav-text">二、研究方法及参数设计</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E4%B8%89%E3%80%81%E5%AE%9E%E8%AF%81%E7%A0%94%E7%A9%B6"><span class="toc-nav-number">12.</span> <span class="toc-nav-text">三、实证研究</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%9B%9B%E3%80%81%E5%AE%9E%E8%AF%81%E7%BB%93%E6%9E%9C%E5%88%86%E6%9E%90"><span class="toc-nav-number">13.</span> <span class="toc-nav-text">四、实证结果分析</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE"><span class="toc-nav-number">14.</span> <span class="toc-nav-text">参考文献</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E4%BB%A5%E4%B8%8A"><span class="toc-nav-number">15.</span> <span class="toc-nav-text">以上</span></a></li></ol>
        
        </div>
      </aside>
    



      <!-- Sidebar Container -->
      <div class="
                col-lg-8 col-lg-offset-1
                col-md-10 col-md-offset-1
                sidebar-container">

        <!-- Featured Tags -->
        
        <section>
          <!-- no hr -->
          <h5>
            <a href="/tags/">FEATURED TAGS</a>
          </h5>
          <div class="tags">
            
            <a class="tag" href="/tags/#Hexo-Theme-LiveMyLife" title="Hexo-Theme-LiveMyLife">Hexo-Theme-LiveMyLife</a>
            
          </div>
        </section>
        

        <!-- Friends Blog -->
        
        <hr>
        <h5>FRIENDS</h5>
        <ul class="list-inline">

          
          <li>
            <a href="https://v-vincen.life/" target="_blank">EJMD</a>
          </li>
          
          <li>
            <a href="http://beantech.org" target="_blank">Chunlin Guo</a>
          </li>
          
          <li>
            <a href="http://huangxuan.me" target="_blank">Miao miao</a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</article>



<!-- anchorjs start -->
<!-- async load function -->
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script type="text/javascript">
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function(e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  };
</script>
<script type="text/javascript">
  //anchor-js, Doc:http://bryanbraun.github.io/anchorjs/
  async ("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js", function() {
    anchors.options = {
      visible: 'hover',
      placement: 'left',
      // icon: 'ℬ'
      icon: '❡'
    };
    anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
  });
</script>
<style>
  /* place left on bigger screen */
  @media all and (min-width: 800px) {
    .anchorjs-link {
      position: absolute;
      left: -0.75em;
      font-size: 1.1em;
      margin-top: -0.1em;
    }
  }
</style>

<!-- anchorjs end -->



		<!-- Footer (contains ThemeColor、viewer) -->
		<!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center">
          

          
            <li>
              <a target="_blank" href="https://github.com/swpu-model-sharing">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
          

          
            <li>
              <a target="_blank" href="https://twitter.com/swpu-model-sharing">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
          

          
            <li>
              <a target="_blank" href="https://www.instagram.com/swpu-model-sharing">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-instagram fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
          

          

          

          

          

        </ul>
        <p class="copyright text-muted">
          Copyright &copy;
          Chunlin Guo
          2022
          <br>
          Theme by
          <a target="_blank" rel="noopener" href="http://beantech.org">BeanTech</a>
          <span style="display: inline-block; margin: 0 5px;">
            <i class="fa fa-heart"></i>
          </span>
          re-Ported by
          <a target="_blank" rel="noopener" href="https://v-vincen.life/">Live My Life</a>
          |
          <iframe style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0" width="91px" height="20px" src="https://ghbtns.com/github-btn.html?user=V-Vincen&repo=V-Vincen.github.io&type=star&count=true"></iframe>
        </p>
      </div>
    </div>
  </div>
</footer>

<a id="rocket" href="#top" class=""></a>


  <!-- jQuery -->
  <script type="text/javascript" src="/js/jquery.min.js"></script>
  <!-- Bootstrap Core JavaScript -->
  <script type="text/javascript" src="/js/bootstrap.min.js"></script>
  <!-- Custom Theme JavaScript -->
  <script type="text/javascript" src="/js/hux-blog.min.js"></script>
  <!-- catalog -->
  <script async="true" type="text/javascript" src="/js/catalog.js"></script>
  <!-- totop(rocket) -->
  <script async="true" type="text/javascript" src="/js/totop.js"></script>

  
    <!-- Busuanzi JavaScript -->
    <script async="async" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  

  
    <!-- Scroll start -->
    <script async="async" type="text/javascript" src="/js/scroll.js"></script>
    <!-- Scroll end -->
  

  
    <!-- LangSelect start -->
    <script type="text/javascript" src="/js/langselect.js"></script>
    <!-- LangSelect end -->
  

  
    <!-- Mouseclick -->
    <script type="text/javascript" src="/js/mouseclick.js" content='' color=''></script>
  

  
    <!-- ribbon -->
    <script type="text/javascript" src="/js/ribbonDynamic.js"></script>
  

  






  <!-- viewer start -->
  <!-- viewer start (Picture preview) -->
  
    <script async="async" type="text/javascript" src="/js/viewer/viewer.min.js"></script>
    <script async="async" type="text/javascript" src="/js/viewer/pic-viewer.js"></script>
  

  <!-- viewer end -->


<script>
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function (e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  }

  // fastClick.js
  async ("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function () {
    var $nav = document.querySelector("nav");
    if ($nav)
      FastClick.attach($nav);
    }
  )
</script>

<!-- Because of the native support for backtick-style fenced code blocks right within the Markdown is landed in Github Pages, From V1.6, There is no need for Highlight.js, so Huxblog drops it officially. -
https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0 - https://help.github.com/articles/creating-and-highlighting-code-blocks/ -->
<!-- <script> async ("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function () { hljs.initHighlightingOnLoad(); }) </script> <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet"> -->

<!-- jquery.tagcloud.js -->
<!-- <script> // only load tagcloud.js in tag.html if ($('#tag_cloud').length !== 0) { async ("https://swpu-model-sharing.github.io/js/jquery.tagcloud.js", function () { $.fn.tagcloud.defaults = { // size: { start: 1, end: 1, unit: 'em' }, color: {
start: '#bbbbee', end: '#0085a1' } }; $('#tag_cloud a').tagcloud(); }) } </script> -->


		<!-- Search -->
		
		<div class="popup search-popup local-search-popup">
  <span class="popup-btn-close">
    ESC
  </span>
  <div class="container">
    <div class="row">
      <!-- <div class="col-md-9 col-md-offset-1"> -->
      <div class="col-lg-9 col-lg-offset-1 col-md-10 col-md-offset-1 local-search-content">

        <div class="local-search-header clearfix">

          <div class="local-search-input-wrapper">
            <span class="search-icon">
              <i class="fa fa-search fa-lg" style="margin: 25px 10px 25px 20px;"></i>
            </span>
            <input autocomplete="off" placeholder="SEARCH..." type="text" id="local-search-input">
          </div>
        </div>
        <div id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>


  
    <script src="/js/ziploader.js"></script>
  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.json";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    // monitor main search box;
    var onPopupClose = function (e) {
      $('.popup').fadeOut(300);
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $('.popup').fadeIn(300);
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }
    // get search zip version
    $.get('/searchVersion.json?t=' + (+new Date()), function (res) {
      if (localStorage.getItem('searchVersion') !== res) {
        localStorage.setItem('searchVersion', res);
        initSearchJson();
      }
    });

    function initSearchJson() {
      initLoad(['/search.flv'], {
        loadOptions: {
          success: function (obj) {
            localStorage.setItem('searchJson', obj['search.json'])
          },
          error: function (e) {
            return console.log(e)
          }
        },
        returnOptions: {
          'json': TYPE_TEXT
        },
        mimeOptions: {
          'json': 'application/json'
        }
      })
    }
    // search function;
    var searchFunc = function (search_id, content_id) {
      'use strict';
      isfetched = true;
      var datas = JSON.parse(localStorage.getItem('searchJson'));
      // console.log(search_id)
      var input = document.getElementById(search_id);
      var resultContent = document.getElementById(content_id);
      var inputEventFunction = function () {
        var searchText = input.value.trim().toLowerCase();
        var keywords = searchText.split(/[\s\-]+/);
        if (keywords.length > 1) {
          keywords.push(searchText);
        }
        var resultItems = [];
        if (searchText.length > 0) {
          // perform local searching
          datas.forEach(function (data) {
            var isMatch = false;
            var hitCount = 0;
            var searchTextCount = 0;
            var title = data.title
              ? data.title.trim()
              : '';
            var titleInLowerCase = title.toLowerCase();
            var content = data.content
              ? data.content.trim().replace(/<[^>]+>/g, "")
              : '';
            var contentInLowerCase = content.toLowerCase();
            var articleUrl = decodeURIComponent(data.url);

            var date = data.date;
            var dateTime = date.replace(/T/, " ").replace(/.000Z/, "");
            var imgUrl = data.header_img;
            


            var indexOfTitle = [];
            var indexOfContent = [];
            // only match articles with not empty titles
            keywords.forEach(function (keyword) {
              function getIndexByWord(word, text, caseSensitive) {
                var wordLen = word.length;
                if (wordLen === 0) {
                  return [];
                }
                var startPosition = 0,
                  position = [],
                  index = [];
                if (!caseSensitive) {
                  text = text.toLowerCase();
                  word = word.toLowerCase();
                }
                while ((position = text.indexOf(word, startPosition)) > -1) {
                  index.push({position: position, word: word});
                  startPosition = position + wordLen;
                }
                return index;
              }
              indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
              indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
            });
            if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
              isMatch = true;
              hitCount = indexOfTitle.length + indexOfContent.length;
            }
            // show search results
            if (isMatch) {
              // sort index by position of keyword
              [indexOfTitle, indexOfContent].forEach(function (index) {
                index.sort(function (itemLeft, itemRight) {
                  if (itemRight.position !== itemLeft.position) {
                    return itemRight.position - itemLeft.position;
                  } else {
                    return itemLeft.word.length - itemRight.word.length;
                  }
                });
              });
              // merge hits into slices
              function mergeIntoSlice(text, start, end, index) {
                var item = index[index.length - 1];
                var position = item.position;
                var word = item.word;
                var hits = [];
                var searchTextCountInSlice = 0;
                while (position + word.length <= end && index.length != 0) {
                  if (word === searchText) {
                    searchTextCountInSlice++;
                  }
                  hits.push({position: position, length: word.length});
                  var wordEnd = position + word.length;
                  // move to next position of hit
                  index.pop();
                  while (index.length != 0) {
                    item = index[index.length - 1];
                    position = item.position;
                    word = item.word;
                    if (wordEnd > position) {
                      index.pop();
                    } else {
                      break;
                    }
                  }
                }
                searchTextCount += searchTextCountInSlice;
                return {hits: hits, start: start, end: end, searchTextCount: searchTextCountInSlice};
              }
              var slicesOfTitle = [];
              if (indexOfTitle.length != 0) {
                slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
              }
              var slicesOfContent = [];
              while (indexOfContent.length != 0) {
                var item = indexOfContent[indexOfContent.length - 1];
                var position = item.position;
                var word = item.word;
                // cut out 100 characters
                var start = position - 20;
                var end = position + 80;
                if (start < 0) {
                  start = 0;
                }
                if (end < position + word.length) {
                  end = position + word.length;
                }
                if (end > content.length) {
                  end = content.length;
                }
                slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
              }
              // sort slices in content by search text's count and hits' count
              slicesOfContent.sort(function (sliceLeft, sliceRight) {
                if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                  return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                  return sliceRight.hits.length - sliceLeft.hits.length;
                } else {
                  return sliceLeft.start - sliceRight.start;
                }
              });
              // select top N slices in content
              var upperBound = parseInt('1');
              if (upperBound >= 0) {
                slicesOfContent = slicesOfContent.slice(0, upperBound);
              }
              // highlight title and content
              function highlightKeyword(text, slice) {
                var result = '';
                var prevEnd = slice.start;
                slice.hits.forEach(function (hit) {
                  result += text.substring(prevEnd, hit.position);
                  var end = hit.position + hit.length;
                  result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                  prevEnd = end;
                });
                result += text.substring(prevEnd, slice.end);
                return result;
              }
              var resultItem = '';

              // if (slicesOfTitle.length != 0) {   resultItem += "<li><a target='_blank' href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>"; } else {   resultItem += "<li><a target='_blank' href='" +
              // articleUrl + "' class='search-result-title'>" + title + "</a>"; } slicesOfContent.forEach(function (slice) {   resultItem += "<a target='_blank' href='" + articleUrl + "'><p class=\"search-result\">" + highlightKeyword(content, slice) +
              // "...</p></a>"; }); resultItem += "</li>";

              if (slicesOfTitle.length != 0) {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</div><time class='search-result-date'>" + dateTime + "</time>";
              } else {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + title + "</div><time class='search-result-date'>" + dateTime + "</time>";
              }
              slicesOfContent.forEach(function (slice) {
                resultItem += "<p class=\"search-result-content\">" + highlightKeyword(content, slice) + "...</p>";
              });
              resultItem += "</div><div class='search-result-right'><img class='media-image' src='" + imgUrl + "' width='64px' height='48px'></img></div></a>";

              resultItems.push({item: resultItem, searchTextCount: searchTextCount, hitCount: hitCount, id: resultItems.length});
            }
          })
        };

        if (keywords.length === 1 && keywords[0] === "") {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else if (resultItems.length === 0) {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else {
          resultItems.sort(function (resultLeft, resultRight) {
            if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
              return resultRight.searchTextCount - resultLeft.searchTextCount;
            } else if (resultLeft.hitCount !== resultRight.hitCount) {
              return resultRight.hitCount - resultLeft.hitCount;
            } else {
              return resultRight.id - resultLeft.id;
            }
          });
          var searchResultList = '<div class=\"search-result-list\">';
          resultItems.forEach(function (result) {
            searchResultList += result.item;
          })
          searchResultList += "</div>";
          resultContent.innerHTML = searchResultList;
        }
      }
      if ('auto' === 'auto') {
        input.addEventListener('input', inputEventFunction);
      } else {
        $('.search-icon').click(inputEventFunction);
        input.addEventListener('keypress', function (event) {
          if (event.keyCode === 13) {
            inputEventFunction();
          }
        });
      }
      // remove loading animation
      $('body').css('overflow', '');
      proceedsearch();
    }
    // handle and trigger popup window;
    $('.popup-trigger').click(function (e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc('local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });
    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function (e) {
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 && $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });

    document.addEventListener('mouseup', (e) => {
      var _con = document.querySelector(".local-search-content");
      if (_con) {
        if (!_con.contains(e.target)) {
          onPopupClose();
        }
      }
    });
  </script>


		
	<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
